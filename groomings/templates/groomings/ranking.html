{% extends "groomings/base.html" %} <!-- base.html(親)の継承 -->
{% load static %}
{% load tag_event %}
{% block title %}Grooming{% endblock %} <!-- タイトル -->

{% block content %}
  <!-- bodyの中身 -->
  <div class="row">
    <div class="col-md-4">
      <h2>ポイントランキング</h2>
      {% for userrank in points %}
       <div class="card">
          <div class="card-header">
            <h3>{{ forloop.counter }}位</h3>
            {% if userrank.image %}
              <img src="{{ userrank.image.url }}" alt="" width="30px">
            {% else %}
              <img src="{% static 'static_image/default.png' %}" alt="" width="30px">
            {% endif %}
            <a href="{% url 'groomings:user' userrank.id  %}">{{ userrank.username }}</a>
          </div>
    
          <div class="card-body">
            <p>ポイント数: {{ userrank.point }}</p>
            {% if user.is_authenticated %}
              {% if userrank != request.user %}
                <br><a href="#">このユーザーに匿名質問をする</a>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="col-md-4">
      <h2>フォロワーランキング</h2>
      {% for follower in followers %}
        <div class="card">
          <div class="card-header">
            <h3>{{ forloop.counter }}位</h3>
            {% if follower.image %}
              <img src="{{ follower.image.url }}" alt="" width="30px">
            {% else %}
              <img src="{% static 'static_image/default.png' %}" alt="" width="30px">
            {% endif %}
            <a href="{% url 'groomings:user' follower.id  %}">{{ follower.username }}</a>
          </div>
    
          <div class="card-body">
            <p>フォロワー数: {{ follower.follower.count }}</p>
            {% if user.is_authenticated %}
              {% if follower != request.user %}
                <br><a href="#">このユーザーに匿名質問をする</a>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="col-md-4">
      <h2>もらった匿名質問数ランキング</h2>
      {% for que in num_que %}
        <div class="card">
          <div class="card-header">
            <h3>{{ forloop.counter }}位</h3>
            {% if que.image %}
              <img src="{{ que.image.url }}" alt="" width="30px">
            {% else %}
              <img src="{% static 'static_image/default.png' %}" alt="" width="30px">
            {% endif %}
            <a href="{% url 'groomings:user' que.id  %}">{{ que.username }}</a>
          </div>
    
          <div class="card-body">
            <p>総被匿名質問数: {{ que.user_receive_question.count }} →内解決済み： {{ que | count_nonactive }}</p>
            {% if user.is_authenticated %}
              {% if que != request.user %}
                <br><a href="#">このユーザーに匿名質問をする</a>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="col-md-4">
      <h2>いいね数ランキング</h2>
      {% for point in goods %}
        <div class="point card">
          <div class="card-header">
            {{ point.title }}
          </div>
          <div class="body">
            <p class="small">ユーザー名：{{ point.user.username }} &nbsp; | &nbsp; いいね数：{{ point | count_favo }}</p>
            <p>{{ point.text }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
</div>
{% endblock %}